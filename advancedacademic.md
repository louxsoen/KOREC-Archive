# Advanced Programming for KOREC

본 코렉 프로젝트에서는 차세대 정보보안 인재를 양성하기 위해 여러분과 동행할 것 입니다.

전부 아는건 중요하지 않습니다. 포기하지만 마세요.



**모든 과정은 인공지능사이버보안학과 1학년 개설 과목들의 피와 살이 되는 핵심 개념입니다.**

## INDEX



## 1. 프로그래밍 언어

프로그래밍 언어란 사람이 컴퓨터와 대화하기 위해 사용하는 언어입니다.

개발자의 목적에 따라 어떤 프로그래밍 언어를 사용할지 결정됩니다.



여러분이 배우실 프로그래밍 언어는 C, C++, Python, Java, MATLAB이 있습니다.



### 프로그래밍 언어의 저울질

#### 사보 친구들이 배울 프로그래밍 언어들

| 프로그래밍언어 | 배우는 시기(이수체계도 기준) |
| :------------: | :--------------------------: |
|       C        |         1학년 1학기          |
|     Python     |         1학년 1학기          |
|      C++       |         1학년 2학기          |
|      Java      |         2학년 1학기          |
|     MATLAB     |         2학년 2학기          |

C 언어와 파이썬 언어를 동시에 배워서 대부분의 학우들은 혼란스럽습니다.

혼란스러운 이유를 찾아봅시다. C언어와 파이썬 언어에서 문장을 하나 출력해보면

**C 언어**

```c
#include <stdio.h>

int main() {
	printf("나는 아직 배가 고프다.");
}
```

**파이썬 언어**

```python
print("나는 아직 배가 고프다.")
```



C보다는 파이썬 코드가 가독성이 더 좋습니다. 이를 **유연성**이 좋다고 표현합니다.

이건 결국 여러분이 맞이하게 될 **저수준(Low-Level) 언어**와 **고수준(High-Level) 언어**의 차이입니다.



특징을 표로 정리해보겠습니다.

|       C (저수준)       |    Python (고수준)     |
| :--------------------: | :--------------------: |
|   코드 관리가 어려움   |    코드 관리가 쉬움    |
| 속도가 상대적으로 빠름 | 속도가 상대적으로 느림 |
|      낮은 호환성       |      높은 호환성       |
| 상대적으로 높은 난이도 | 상대적으로 낮은 난이도 |

위 표를 외우려고 하지마세요. 프로그래밍의 패러다임은 항상 빠르게 변합니다.

고수준이 저수준보다 빠르게 작동하는 사례도 많습니다.



저수준이 좋다? 고수준이 좋다?

무조건 뭐가 좋다라고 단정지을 수 없습니다. 언어의 특성에 따라 장단점이 존재하고 개발하는 여러분은 자신의 프로그래밍 언어를 상황에 따라 맞게 사용

#### 컴파일러

사람과 컴퓨터가 소통을 하기 위해 언어가 필요합니다.

위에서는 C, Python 언어를 소개했습니다.



## 2. 암호 기초 - 개념편

### 수의 표현과 컴퓨터의 수 인식 (진법)

컴퓨터의 수 인식을 배우기 전에, 간단한 상식을 먼저 알아보도록 하겠습니다.

0과 1의 상태를 갖는, 컴퓨터가 다룰 수 있는 자료(데이터)의 최소 단위를 비트라고 합니다.





#### 2진법

#### 8진법

#### 16진법



### 컴퓨터의 문자 인식 (인코딩)

#### 아스키 코드

#### UTF-8 (유니코드)



### 암호란 ? 

**암호 :  비밀을 공유하는 특정 사람을 제외하고는 어떤 정보를 알 수 없게 만든 것.**

기초 용어부터 정리하고 가겠습니다. 암호의 정의는 위와 같고, 저걸 기반으로 설명을 하겠습니다.

위에서 '어떤 정보를 알 수 없게 만드는' 과정을 **암호화(Encrypt)**라고 하고, 알 수 없게 만든 결과를 **암호문(Ciphertext)**이라고 합니다.

여기서 '어떤 정보'를 **평문(Plaintext)** 또는 **메시지(Message)**라고 부릅니다.

'비밀을 공유하는 특정 사람'은 어떻게 구분될까요? 당연히 암호문이 어떻게 만들어졌는지를 아는 것으로 구분하는 것이 가능합니다. 암호화에 관여하는 값을 우리는 **키(Key)**라고 부릅니다.  키는 암호에 따라 하나만 쓰이기도, 여러 개가 쓰이기도 합니다. 문자가 될 수도 있고, 숫자나 단어가 될 수도 있습니다.

과정이 많아 시간이 지나면 파악되기 쉬운 거대한 암호 알고리즘보다는, 암호화를 하는 키를 보호하는 것을 원칙으로 합니다. 결국 모든 키를 알고 있다면 암호문을 해독할 수 있는 것이겠죠.

암호문을 평문으로 복구하는 것을 **복호화(Decrypt)**라고 합니다.



실제 암호 없이 이론만을 이야기하면 이해하기가 어려우므로, 몇 가지 암호 알고리즘을 살펴보도록 합시다.

여기 한 암호가 있습니다. 이 암호는 영어 단어가 있을 때, (아스키 코드에 대해 설명할때도 설명했지만, 우리는 영어 알파벳 중심으로 암호 체계를 볼 예정입니다.) 각 자리에 있는 문자에서 알파벳 순으로 13칸 뒤로 이동한 결과를 취합니다. Z뒤의 알파벳은 다시 A로 돌아와서 셉니다.

표로 정리하면 (중요 : 표는 변환 결과를 정리한 것일 뿐 암호화 과정에는 의미가 없습니다! 컴퓨터가 아니라 사람 손으로 암호화를 하면 몰라도요 )

| A    | B    | C    | D    | E    | F    | G    | H    | I    | J    | K    | L    | M    | N    | O    | P    | Q    | R    | S    | T    | U    | V    | W    | X    | Y    | Z    |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| N    | O    | P    | Q    | R    | S    | T    | U    | V    | W    | X    | Y    | Z    | A    | B    | C    | D    | E    | F    | G    | H    | I    | J    | K    | L    | M    |

이렇게 되는데 이걸 활용해서 암호화를 해보죠 

영단어 HELLO가 있습니다. 13칸 뒤로 옮기면 URYYB 가 되겠죠, 여기서 평문은 HELLO, 암호문은 URYYB가 됩니다. n번째 알파벳을 (n+k)%27번 째 알파벳으로 바꾸는 것이 암호화 과정이고, 암호화 과정에 관여하는 k값이 키 값입니다. 여기서는 13이라고 할 수 있겠네요. 

복호화는 암호문을 대상으로 암호화 알고리즘을 뒤집으면 됩니다. 

| N    | O    | P    | Q    | R    | S    | T    | U    | V    | W    | X    | Y    | Z    | A    | B    | C    | D    | E    | F    | G    | H    | I    | J    | K    | L    | M    |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| A    | B    | C    | D    | E    | F    | G    | H    | I    | J    | K    | L    | M    | N    | O    | P    | Q    | R    | S    | T    | U    | V    | W    | X    | Y    | Z    |

URYYB => HELLO

이제 암호의 기본 개념은 이해하셨으리라고 생각합니다.

추가적으로, 문자를 다른 문자로 바꾸는 것을 **치환**, 그리고 각 문자에 같은 알고리즘을 적용하여 바꾸는 암호를 **단일 치환 암호**라고 합니다. 



그럼 암호를 만드는데 치환 말고도 어떤 방법이 있는지 다른 핵심 개념과 함께 알아봅시다.

#### 혼돈과 확산



## 3. 암호 기초 - 수학편

### 나머지 연산 (mod)

#### 왜 필요할까?

#### 어떤 연산이 있을까?



## 4. 고전암호

### 카이사르 암호



## 5. 현대암호











# 정리 안된 내용 모음



### 리틀 엔디안, 빅 엔디안

### BIT, BYTES <- 진법

16, 2

각각 한 자리수가 몇 비트인지



코드 구현



c, 암호에 집중

### 전처리

### 파일 입출력

### 헤더파일 묶는거

### 고전암호

구현 -> 뚫기 -> 대체 (시대적 상황)

현대암호에서 쓰이는 부분

시저암호의 돌리는 연산 -> Shiftrows

단순치환암호

다중치환 암호 중 비즈네르 암호

### ALGORITHM

AES.

경우의 수

텟트



## 커리큘럼?

프로그래밍 살짝 배우고 => 암호 기초 + 고전암호 입문 => 고전암호 구현과 오류 직면(예 : 대문자와 소문자는 어떻게 처리할 것인가? Z 이후로의 덧셈은?) => 관련 코딩 정보(아스키, char 자료형 등...) + 암호 수학 : 모듈러스와 나머지 연산자 => 덧셈 암호로 일반화 => 덧셈 암호 여러번 적용해도 26가지로 뚫림... 모듈러스 때문에 그렇게 됨 => 아핀암호 설명 => 312가지만 키로 작용 => 암호수학 : 합동식에서 곱셈과 나눗셈 + 유클리디안 알고리즘=> 암호의 통계적 분석 => 비즈네르 암호 => 비즈네르 암호 공격 => XOR 연산 , 연산 특징, 왜 쓰는지 + 구현 + 문제





## 사용할 문제들 정리해보기(Crypto)

### HackCTF

#### Great Binary

##### 뭐하는 문제인가?

2진수로 표현된 8비트를 아스키 문자로 바꾸는 문제.

##### 무엇을 배울 수 있는가?

- 컴퓨터 상에서 문자가 숫자로 표현됨
- 8비트가 한 글자임.
- 8비트열 여러개가 붙어있는거나 8비트씩 떨어진걸 따로 해석하는거나 별 차이 없음.

#### Smooth Ciphertext

##### 뭐하는 문제인가?

비즈네르 암호 해독 + 플래그폼 내부의 암호 ROT 13(또는 덧셈암호)

##### 무엇을 배울 수 있는가?

- 통계적 분석 적용

- 고전암호 문제는 해독기를 찾아서 돌리면 풀 수 있음(=> 고전암호 공격을 열심히 안배워도 됨 ㅠㅠ)
- 비즈네르 암호 해독기로도 덧셈암호 풀 수 있음

#### Classic Cipher - 1

##### 뭐하는 문제인가?

파이썬의 인덱스 슬라이싱 기능 사용(이부분은 빼는 식으로 수정하는게 좋을지도...?) + 카이사르 암호

##### 무엇을 배울 수 있는가?

- 카이사르 암호 해독 적용
- 플래그가 반드시 플래그폼을 끼고 주어지지 않음
- 문제에 힌트도 있을 수 있음(?)



#### Classic Cipher -2

##### 뭐하는 문제인가?

전치 암호 중 열 전치 해독

##### 무엇을 배울 수 있는가?

- 전치암호 관련 감잡기
  - 단어로 제공되는 키, 키를 구성하는 알파벳의 순서가 순서를 나타냄
- 기초적인 전치암호 중 행 전치암호가 위키에 나와있음 => 근데 이건 열 전치암호
- 열을 따라 쓰는지, 행을 따라 쓰는지에 대한 것을 정하고, 키를 열을 따라 적용할 것인지 행을 따라 적용할 것인지 정하면 되는 문제임.
- writeup 보고 공부하기 (솔직히 writeup 없이 못풀것같음. 너무 문제 수가 적고 생소함)



#### Classic Cipher - 3

##### 뭐하는 문제인가?

아핀암호 사용 해독문제

##### 무엇을 배울 수 있는가?

- 특징 : 자주 쓰는 고전암호 풀이 사이트 decode.fr과 boxentriq.com에 있는 Cipher Identifier가 이게 뭔 암호인지도 못맞춤. (merricx.github.io<= 여기서는 맞춤)
- 아핀암호인것을 특정했다면 나머지는 쉬운 편... 인데 통계적 분석을 적용하라고 하면 길이가 짧으므로 어려울 수 있음. 플래그폼이 제공되는 암호문임을 파악했다면 쉬울지도..?



#### Classic Cipher - 4

##### 뭐하는 문제인가?

전치암호 해독

##### 무엇을 배울 수 있는가?

- 평소에 접했던 알파벳(숫자)를 일정 알고리즘에 따라 바꾸는 전치암호가 아니라 그냥 바꿔버리는 진짜 전치암호를 경험할 수 있음
- 특수문자를 해석해주는 암호는 찾기 힘든데, 텍스트 편집 프로그램의 "모두 바꾸기"기능을 통해 서로 다른 특수문자를 임의의 알파벳으로 변경하는 작업을 거쳐야함. 
- 나머지는 전치암호 해독기를 통해 푸는 것이 가능함.



#### RSA

##### 뭐하는 문제인가?

p, q와 e가 주어졌을 때 RSA 해독. 

##### 무엇을 배울 수 있는가?

- RSA원리 적용 가능. 
- PIP 설치, 아마 즉각적으로 한줄한줄의 결과가 나오는 파이썬이 더 풀기 편할 것 같음.
- 16진값을 아스키로 변환하기



#### RSA2

##### 뭐하는 문제인가?

작은 N이 주어졌을 때 RSA 공격 (DB에 존재하는 소인수분해)

##### 무엇을 배울 수 있는가?

- RSA원리 적용 가능
- 다양한 RSA 공격법에 대한 상황별 이해(나머지는 찾아보면서 늘리기)



#### RSA3

##### 뭐하는 문제인가?

작은 암호화 지수 e가 주어졌을 때 RSA 공격(낮은 지수 공격)

##### 무엇을 배울 수 있는가?

- RSA원리 적용 가능
- 다양한 RSA 공격법에 대한 상황별 이해(나머지는 찾아보면서 늘리기)



#### babyXOR

##### 뭐하는 문제인가?

리눅스의 nc커맨드에 접근해서 (사실 필요 없음.. 뭐 실행되는지 파일로 주니까.) 순환 확장되는 키를 키 길이 설정을 이용해서 xor연산으로 암호화 된 코드를 복호화 하는 문제

##### 무엇을 배울 수 있는가?

- 암호 문제를 섞어 봤자 기존에 배운거 활용임
- XOR의 계산식에서 두 피연산자와 결과 3가지의 값이 있을 때 셋 중 둘만 알아도 나머지를 알 수 있음.
- XOR 계산식에서 동일한 피연산자로 두 번 연산하면 아무런 의미가 없어짐.
- 복잡해 보이는 코드도 하나하나 알아가면 다 해석할 수 있음
- (Python3 사용자의 경우) Bytes 문자열 표현과 변환
- 암호 관련 몇가지 함수(ord, chr), PIP 설치
- 암호화 코드를 굳이 실행하거나 그러기 위해서 따로 실행 환경을 마련할 필요는 없음. 상황에 따라 코드를 복사해서 사용할 수는 있음.



#### HelloCrypto

##### 뭐하는 문제인가?

파이썬 코드를 분석하여 주어진 암호문을 해독.

strxor이라는 문자를 16진 값으로 바꿔 xor하는 함수가 있는데 그걸 사용한 뒤 (유사)비즈네르 암호에 덧셈 암호까지 섞어서 암호화한 것.

마지막으로 16진 형태의 암호문을 base64로 암호화한것을 복호화

XOR의 성질을 바탕으로 키 값의 일부를 찾아서 암호문의 길이와 코드를 바탕으로 원래 메시지의 길이, 키의 길이를 파악하고 키 값의 나머지를 찾은 뒤 xor하기 이전 값까지 복구, 그걸 xor연산을 통해 복구

##### 무엇을 배울 수 있는가?

- 복호화의 모든 과정을 파이썬 코드로 구현할 필요가 없음. 웹에서 해결할 수단이 있다면 그걸 활용하고 복잡하거나 반복적인 일부 계산은 파이썬에 맡겨서 즉각적으로 답을 뽑아내는게 좋음.
- 나머지는 위의 babyXOR과 동일.



#### XOR

##### 뭐하는 문제인가?

파이썬 코드를 분석하여 주어진 암호문을 해독.

pack과 unpack이라는 함수가 있는데 이걸 이해하려면 리틀 엔디안, 빅 엔디안에 대한 지식이 아마도 필요함. 하지만 문제를 풀 때는 슬프지만 굳이 이해할 필요는 없음.

함수 작용 하나하나 이해하면 결과만 보면 xor연산이 핵심임을 알 수 있음. XOR의 성질 중 두 값을 알면 나머지 하나의 값도 알 수 있다는 것을 이용하여 거꾸로 거슬러 올라가면 됨. 암호화 코드를 이용하면 쉬움.

##### 무엇을 배울 수 있는가?

- 굳이 import한 모듈이 어떤 모듈인지 몰라도 그냥 그때그때 배우면 알 수 있음. 
- pack과 unpack함수가 어떻게 이루어 지는지(선택, 근데 나도 모름.)
- 기타 파이썬 함수들과 한 줄 for문, 여러 변수 대입등의 표현

- XOR의 계산식에서 두 피연산자와 결과 3가지의 값이 있을 때 셋 중 둘만 알아도 나머지를 알 수 있음.

